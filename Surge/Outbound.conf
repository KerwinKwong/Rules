# 除了注释建议浏览官方手册（https://manual.nssurge.com/）、帮助中心（https://nssurge.zendesk.com/）以及技术社区（https://community.nssurge.com）

[General]
# ---(通用)---
# 延迟测试
# > Internet 测试 URL
internet-test-url = http://www.aliyun.com
# > 代理测速 URL
proxy-test-url = http://www.gstatic.com/generate_204
# > 测试超时（秒）
# test-timeout = 5
# TLS 引擎
tls-provider = openssl
# IPv6 支持（关闭）
ipv6 = false
# ------

# ---(Wi-Fi 访问)---
allow-wifi-access = false
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# ------

# ---(远程控制器)---
# 允许 Surge 请求查看器或 Surge CLI 进行管理控制。
# 如果允许由 Wi-Fi 控制则将「127.0.0.1」修改为「0.0.0.0」
# external-controller-access = password@127.0.0.1:6170
# ------

# ---(兼容性)---
# 兼容模式
# compatibility-mode = 0
# 跳过代理
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, mfs.ykimg.com*.ttf
# 排除简单主机名
exclude-simple-hostnames = true
# SSID 组策略
# 当 Wi-Fi 不是首选网络时 SSID 组策略使用默认策略（仅 macOS 版）
use-default-policy-if-wifi-not-primary = false
# ------

# ---(DNS 服务器)---
# 电信 118.118.118.118
# 联通 116.116.116.116
dns-server = 119.29.29.29,system
# ------

# ---(实验性功能)---
# 使用 Network framework
# network-framework = true
# ------

# ---(高级)---
# 日志级别
loglevel = notify

# 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true

# Always Real IP Hosts
# 当 Surge VIF 处理 DNS 问题时，此选项要求 Surge 返回一个真正的 IP 地址，而不是一个假 IP 地址。
# DNS 数据包将被转发到上游 DNS 服务器。
always-real-ip = msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com

# Hijack DNS
# 默认情况下，Surge 只返回发送到 Surge DNS 地址的 DNS 查询的假 IP 地址(198.18.0.2)。
# 有些设备或软件总是使用硬编码的 DNS 服务器。 (例如 Google Speakers 总是使用 8.8.8.8)。 您可以使用此选项劫持查询，以获得一个假地址。
# hijack-dns = 8.8.8.8:53, 8.8.4.4:53

# TCP Force HTTP Hosts
# 让 Surge 把 TCP 连接当作 HTTP 请求来处理。Surge HTTP 引擎将处理这些请求，所有的高级功能，如捕获、重写和脚本等都可以使用。
force-http-engine-hosts = *.ott.cibntv.net,123.59.31.1,119.18.193.135,122.14.246.33,175.102.178.52

# VIF Excluded Routes
# Surge VIF 只能处理 TCP 和 UDP 协议。使用此选项可以绕过特定的 IP 范围，允许所有流量通过。
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12

# VIF Included Routes
# 默认情况下，Surge VIF 接口会声明自己是默认路由。但是，由于 Wi-Fi 接口的路由较小，有些流量可能不会通过 Surge VIF 接口。使用此选项可以添加一条较小的路由。
# tun-included-routes = 192.168.1.12/32
# ------

[Replica]
# ---(实验性功能)---
# 0 为关闭，1 为开启
# > 隐藏 Apple 请求
hide-apple-request = 0
# > 隐藏崩溃追踪器请求
hide-crash-reporter-request = 1
# > 隐藏 UDP 会话
hide-udp = 0
# > 关键词过滤器
# none（关闭关键词过滤器） / whitelist（blacklist（仅记录包含关键字的请求）） / blacklist（仅记录不包含关键字的请求） / pattern（匹配通配符的请求）
# keyword-filter-type = none
# > 关键词
# keyword-filter = (null)
# ------


[Proxy]
🌐Direct = direct
⛔️Reject = reject

[Proxy Group]
🚧Final = select, 🌏Proxy, 🌐Direct
🍎Apple = select, 🔰Fallback, 🏳️‍🌈AutoTest, 🇯🇵Japan, 🇨🇳Taiwan, 🇭🇰HongKong, 🇺🇸UnitedStates
🐦Twitter = select, 🔰Fallback, 🏳️‍🌈AutoTest, 🇯🇵Japan, 🇨🇳Taiwan, 🇭🇰HongKong, 🇺🇸UnitedStates
🌏Proxy = select, 🔰Fallback, 🏳️‍🌈AutoTest, 🇯🇵Japan, 🇨🇳Taiwan, 🇭🇰HongKong, 🇺🇸UnitedStates
🎯Streaming = select, 🌏Proxy, 🏳️‍🌈AutoTest, 🇯🇵Japan, 🇨🇳Taiwan, 🇭🇰HongKong, 🇺🇸UnitedStates
💮StreamingSE = select, 🌐Direct, 🇯🇵Japan, 🇨🇳Taiwan, 🇭🇰HongKong, 🇺🇸UnitedStates
🛡Guard = select, ⛔️Reject, 🌐Direct
🔰Fallback = fallback, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🏳️‍🌈AutoTest = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🇯🇵Japan = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge&area=jp, update-interval=3600, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🇨🇳Taiwan = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge&area=tw, update-interval=3600, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🇭🇰HongKong = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge&area=hk, update-interval=3600, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🇺🇸UnitedStates = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge&area=us, update-interval=3600, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100
🕹Games = url-test, policy-path=https://dler.cloud/subscribe/Token?protocols=trojan&list=surge&type=gamer, update-interval=3600, url=http://cp.cloudflare.com/generate_204, interval=1800, tolerance=100

[Rule]
# https://raw.githubusercontent.com/KerwinKwong/Rules/master/Quantumult/Filter/Extra/Apple/BlockiOSUpdate.list,⛔️Reject
# Client
# > Proxy
PROCESS-NAME,v2ray,🌐Direct
PROCESS-NAME,ss-local,🌐Direct
PROCESS-NAME,UUBooster,🌐Direct
# > Download
PROCESS-NAME,aria2c,🌐Direct
PROCESS-NAME,fdm,🌐Direct
PROCESS-NAME,Folx,🌐Direct
PROCESS-NAME,NetTransport,🌐Direct
PROCESS-NAME,Thunder,🌐Direct
PROCESS-NAME,Transmission,🌐Direct
PROCESS-NAME,uTorrent,🌐Direct
PROCESS-NAME,WebTorrent,🌐Direct
PROCESS-NAME,WebTorrent Helper,🌐Direct
# Unbreak 后续规则修正
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Unbreak.list,🌐Direct
# Advertising 广告
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Guard/Advertising.list,🛡Guard
# Privacy 隐私
# RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Guard/Privacy.list,🛡Guard
# Hijacking 运营商劫持或恶意网站
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Guard/Hijacking.list,🛡Guard
# Streaming 国际流媒体服务
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/StreamingMedia/Streaming.list,🎯Streaming
# StreamingSE 中国流媒体服务（面向海外版本）
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/StreamingMedia/StreamingSE.list,💮StreamingSE
# Apple 服务
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/Apple.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/AppStore.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/AppStoreConnect.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/BlockiOSUpdate.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/FindMy.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/iCloud.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/Mail.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/Music.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/News.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/Siri.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/SoftwareUpdate.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/TestFlight.list,🍎Apple
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Apple/TV.list,🍎Apple
#Twitter 服务
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Twitter/Twitter.list,🐦Twitter
# Global 全球加速
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Global.list,🌏Proxy
# China 中国直连
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/China.list,🌐Direct
# Local Area Network 局域网
IP-CIDR,192.168.0.0/16,🌐Direct
IP-CIDR,10.0.0.0/8,🌐Direct
IP-CIDR,172.16.0.0/12,🌐Direct
IP-CIDR,127.0.0.0/8,🌐Direct
IP-CIDR,100.64.0.0/10,🌐Direct
IP-CIDR,224.0.0.0/4,🌐Direct
# 使用来自 ipipdotnet 的 ChinaIP 以解决数据不准确的问题，使用 ChinaIP.list 时禁用「GEOIP,CN」规则
RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/ChinaIP.list,🌐Direct
# GeoIP China(若启用，则禁用 ChinaIP.list)
# GEOIP,CN,🌐Direct
# RULE-SET,https://raw.githubusercontent.com/KerwinKwong/Rules/master/Surge/Ruleset/Extra/Game/Game.list,🎮Game
FINAL,🚧Final,dns-failed

[Host]
# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# PCBeta
pcbeta.com = 36.27.212.81
uc.pcbeta.com = 36.27.212.81
m.pcbeta.com = 36.27.212.81
mac.pcbeta.com = 36.27.212.81
static.template.pcbeta.com = 36.27.212.81
web.pcbeta.com = 36.27.212.81
i.pcbeta.com = 36.27.212.81
bbs.pcbeta.com = 36.27.212.81
www.pcbeta.com = 36.27.212.81
cdn.pcbeta.attachment.inimc.com = 36.27.212.81
cdn.pcbeta.static.inimc.com = 36.27.212.81
cdn.pcbeta.css.inimc.com = 36.27.212.81

[Header Rewrite]

[SSID Setting]

[Script]
# bilibili签到
# [获取Cookie] http-request ^https:\/\/(www|live)\.bilibili\.com\/?.? script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/bilibili/bilibili.cookie.js
cron "10 0 0 * * *" script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/bilibili/bilibili.js

# 网易云签到
http-request ^https:\/\/music.163.com\/weapi\/user\/level script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/neteasemusic/neteasemusic.cookie.js,requires-body=true
cron "12 0 0 * * *" script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/neteasemusic/neteasemusic.js

# 中国联通
# http-request ^https?:\/\/act.10010.com\/SigninApp\/signin\/querySigninActivity.htm script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10010/10010.cookie.js
# http-request ^https?:\/\/act.10010.com\/SigninApp(.*?)\/signin\/daySign script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10010/10010.cookie.js
http-request ^https?:\/\/m.client.10010.com\/dailylottery\/static\/(textdl\/userLogin|active\/findActivityInfo) script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10010/10010.cookie.js
cron "14 0 0 * * *" script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10010/10010.js

# 中国移动
http-request ^http:\/\/wx.10086.cn\/website\/taskCenter\/index\? script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10086/10086.cookie.js
http-request ^http:\/\/wx.10086.cn\/website\/taskCenter\/sign\? script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10086/10086.cookie.js
cron "16 0 0 * * *" script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/10086/10086.js

# 人人影视
# http-request ^https:\/\/api\.rr\.tv\/user\/profile script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/rrtv/rrtv.cookie.js
cron "18 0 0 * * *" script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/rrtv/rrtv.js

[MITM]
skip-server-cert-verify = true
ca-passphrase = 2D0E4154
ca-p12 = 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
